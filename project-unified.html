<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新規申請作成 - 障害年金管理システム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif']
                    },
                    colors: {
                        'notion-gray': {
                            50: '#fbfbfb',
                            100: '#f7f6f3',
                            200: '#ebeae6',
                            300: '#d1cfc8',
                            400: '#9b9a97',
                            500: '#787774',
                            600: '#5e5d5a',
                            700: '#37352f',
                            800: '#25241f',
                            900: '#1f1e1a'
                        },
                        'linear-blue': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1'
                        }
                    },
                    boxShadow: {
                        'notion': '0 1px 2px rgba(0, 0, 0, 0.04)',
                        'notion-hover': '0 2px 8px rgba(0, 0, 0, 0.08)',
                        'linear': '0 1px 3px rgba(0, 0, 0, 0.05), 0 10px 25px rgba(0, 0, 0, 0.05)'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-notion-gray-50 font-sans antialiased">
    <div class="min-h-screen">
        <!-- Header -->
        <header class="bg-white/80 backdrop-blur-md border-b border-notion-gray-200/60 px-6 py-4 sticky top-0 z-40">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-linear-blue-500 to-linear-blue-600 rounded-lg flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <h1 class="text-xl font-semibold text-notion-gray-800">障害年金管理システム</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="flex items-center space-x-2 px-3 py-2 bg-notion-gray-100 rounded-lg">
                        <div class="w-6 h-6 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-xs font-medium text-white">田</div>
                        <span class="text-sm font-medium text-notion-gray-700">田中太郎</span>
                    </div>
                    <button class="p-2 text-notion-gray-500 hover:text-notion-gray-700 hover:bg-notion-gray-100 rounded-lg transition-all duration-200">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <div class="flex">
            <!-- Sidebar -->
            <div class="w-64 bg-white/50 backdrop-blur-sm border-r border-notion-gray-200/60 min-h-screen">
                <nav class="p-4 space-y-1">
                    <div class="mb-8">
                        <div class="text-xs font-semibold text-notion-gray-400 uppercase tracking-wider mb-3">メニュー</div>
                        <ul class="space-y-1">
                            <li>
                                <a href="index.html" class="group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg text-notion-gray-600 hover:bg-notion-gray-100 hover:text-notion-gray-800 transition-all duration-200">
                                    <div class="mr-3 p-1.5">
                                        <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                                        </svg>
                                    </div>
                                    ダッシュボード
                                </a>
                            </li>
                            <li>
                                <a href="projects.html" class="group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg text-notion-gray-600 hover:bg-notion-gray-100 hover:text-notion-gray-800 transition-all duration-200">
                                    <div class="mr-3 p-1.5">
                                        <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 3a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    年金申請一覧
                                </a>
                            </li>
                            <li>
                                <a href="logs.html" class="group flex items-center px-3 py-2.5 text-sm font-medium rounded-lg text-notion-gray-600 hover:bg-notion-gray-100 hover:text-notion-gray-800 transition-all duration-200">
                                    <div class="mr-3 p-1.5">
                                        <svg class="h-4 w-4" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h4a1 1 0 010 2H6.414l2.293 2.293a1 1 0 01-1.414 1.414L5 6.414V8a1 1 0 01-2 0V4zm9 1a1 1 0 010-2h4a1 1 0 011 1v4a1 1 0 01-2 0V6.414l-2.293 2.293a1 1 0 11-1.414-1.414L13.586 5H12zm-9 7a1 1 0 012 0v1.586l2.293-2.293a1 1 0 111.414 1.414L6.414 15H8a1 1 0 010 2H4a1 1 0 01-1-1v-4zm13-1a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 010-2h1.586l-2.293-2.293a1 1 0 111.414-1.414L15 13.586V12a1 1 0 011-1z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    変更履歴
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- Main Content -->
            <main class="flex-1 p-8 max-w-6xl mx-auto">
                <div class="space-y-8">
                    <!-- Page Header -->
                    <div class="text-center">
                        <h1 id="pageTitle" class="text-3xl font-bold text-notion-gray-800 mb-2">新規申請作成</h1>
                        <p id="pageSubtitle" class="text-notion-gray-500">障害年金申請の情報を入力してください</p>
                    </div>

                    <!-- Form -->
                    <form class="space-y-8">
                        <!-- 申請者基本情報 -->
                        <div class="bg-white/70 backdrop-blur-sm rounded-xl border border-notion-gray-200/60 shadow-notion overflow-hidden">
                            <div class="bg-blue-50 px-6 py-4 border-b border-notion-gray-200/60">
                                <h2 class="text-xl font-semibold text-notion-gray-800 flex items-center">
                                    <div class="w-6 h-6 bg-blue-500 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    申請者基本情報
                                </h2>
                            </div>
                            
                            <div class="p-6 space-y-6">
                                <!-- 名前・フリガナ -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            氏名 <span class="text-red-500">*</span>
                                        </label>
                                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="田中太郎">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            フリガナ <span class="text-red-500">*</span>
                                        </label>
                                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="タナカタロウ">
                                    </div>
                                </div>

                                <!-- 年齢・性別・生年月日 -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            年齢 <span class="text-red-500">*</span>
                                        </label>
                                        <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="42">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            性別
                                        </label>
                                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                            <option value="">選択してください</option>
                                            <option value="male">男性</option>
                                            <option value="female">女性</option>
                                            <option value="other">その他</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            生年月日
                                        </label>
                                        <input type="date" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                    </div>
                                </div>

                                <!-- 基礎年金番号 -->
                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                        基礎年金番号 <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="1234-567890">
                                </div>

                                <!-- 連絡先 -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            電話番号
                                        </label>
                                        <input type="tel" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="03-1234-5678">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            メールアドレス
                                        </label>
                                        <input type="email" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="example@example.com">
                                    </div>
                                </div>

                                <!-- 住所 -->
                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                        住所
                                    </label>
                                    <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="東京都新宿区西新宿1-1-1">
                                </div>
                            </div>
                        </div>

                        <!-- 家族情報 -->
                        <div class="bg-white/70 backdrop-blur-sm rounded-xl border border-notion-gray-200/60 shadow-notion overflow-hidden">
                            <div class="bg-green-50 px-6 py-4 border-b border-notion-gray-200/60">
                                <h2 class="text-xl font-semibold text-notion-gray-800 flex items-center">
                                    <div class="w-6 h-6 bg-green-500 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                                            <path d="M6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"/>
                                        </svg>
                                    </div>
                                    家族情報
                                </h2>
                            </div>
                            
                            <div class="p-6 space-y-6">
                                <!-- 配偶者有無 -->
                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-3">配偶者の有無</label>
                                    <div class="flex space-x-6">
                                        <label class="flex items-center">
                                            <input type="radio" name="hasSpouse" value="true" class="mr-2">
                                            <span class="text-sm text-notion-gray-700">有り</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="radio" name="hasSpouse" value="false" class="mr-2">
                                            <span class="text-sm text-notion-gray-700">無し</span>
                                        </label>
                                    </div>
                                </div>

                                <!-- 配偶者情報 -->
                                <div id="spouseInfo" class="hidden">
                                    <h3 class="text-lg font-semibold text-notion-gray-700 mb-4">配偶者情報</h3>
                                    
                                    <!-- 基本情報 -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">氏名 <span class="text-red-500">*</span></label>
                                            <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="田中花子">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">フリガナ <span class="text-red-500">*</span></label>
                                            <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="タナカハナコ">
                                        </div>
                                    </div>

                                    <!-- 個人識別情報 -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">マイナンバー <span class="text-red-500">*</span></label>
                                            <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="123456789012" pattern="[0-9]{12}" maxlength="12">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">基礎年金番号 <span class="text-red-500">*</span></label>
                                            <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="1234-567890">
                                        </div>
                                    </div>

                                    <!-- 基本属性 -->
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">生年月日 <span class="text-red-500">*</span></label>
                                            <input type="date" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">年齢</label>
                                            <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="38" min="0" max="150">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">性別</label>
                                            <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                                <option value="">選択してください</option>
                                                <option value="male">男性</option>
                                                <option value="female">女性</option>
                                                <option value="other">その他</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- 年収情報 -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">年収（前年度）</label>
                                            <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="3000000" min="0">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">年収（前々年度）</label>
                                            <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="2900000" min="0">
                                        </div>
                                    </div>

                                    <!-- 加算対象情報 -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">配偶者加算対象</label>
                                            <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                                <option value="">選択してください</option>
                                                <option value="yes">対象</option>
                                                <option value="no">対象外</option>
                                                <option value="unknown">不明</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">振替加算対象</label>
                                            <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                                <option value="">選択してください</option>
                                                <option value="yes">対象</option>
                                                <option value="no">対象外</option>
                                                <option value="unknown">不明</option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- 住所情報 -->
                                    <div class="mb-6">
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">住所</label>
                                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="東京都新宿区西新宿1-1-1">
                                    </div>

                                    <!-- 連絡先情報 -->
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">電話番号</label>
                                            <input type="tel" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="03-1234-5678">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-notion-gray-700 mb-2">メールアドレス</label>
                                            <input type="email" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="hanako@example.com">
                                        </div>
                                    </div>
                                </div>

                                <!-- 子ども情報 -->
                                <div>
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-lg font-semibold text-notion-gray-700">子ども情報</h3>
                                        <button type="button" class="px-4 py-2 bg-linear-blue-600 hover:bg-linear-blue-700 text-white text-sm font-medium rounded-lg transition-all duration-200 flex items-center space-x-2" onclick="addChild()">
                                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                                <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                                            </svg>
                                            <span>子どもを追加</span>
                                        </button>
                                    </div>
                                    <div id="childrenList" class="space-y-4">
                                        <div class="text-sm text-notion-gray-500">「子どもを追加」ボタンを押して子ども情報を入力してください</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 保存ボタン -->
                        <div class="bg-white/70 backdrop-blur-sm rounded-xl border border-notion-gray-200/60 shadow-notion p-6">
                            <div class="flex justify-end space-x-4">
                                <button type="button" onclick="window.history.back()" class="px-6 py-3 border border-notion-gray-300 rounded-lg text-notion-gray-700 font-medium hover:bg-notion-gray-50 transition-all duration-200">
                                    キャンセル
                                </button>
                                <button type="button" onclick="saveApplication()" class="px-6 py-3 bg-linear-blue-600 hover:bg-linear-blue-700 text-white font-medium rounded-lg transition-all duration-200 flex items-center space-x-2">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"/>
                                    </svg>
                                    <span>保存</span>
                                </button>
                            </div>
                        </div>

                        <!-- 傷病情報 -->
                        <div class="bg-white/70 backdrop-blur-sm rounded-xl border border-notion-gray-200/60 shadow-notion overflow-hidden">
                            <div class="bg-red-50 px-6 py-4 border-b border-notion-gray-200/60">
                                <h2 class="text-xl font-semibold text-notion-gray-800 flex items-center">
                                    <div class="w-6 h-6 bg-red-500 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
                                        </svg>
                                    </div>
                                    傷病情報
                                </h2>
                            </div>
                            
                            <div class="p-6 space-y-6">
                                <!-- 基本情報 -->
                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                        傷病名 <span class="text-red-500">*</span>
                                    </label>
                                    <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="うつ病、統合失調症など">
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            初診日 <span class="text-red-500">*</span>
                                        </label>
                                        <input type="date" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            障害認定日 <span class="text-red-500">*</span>
                                        </label>
                                        <input type="date" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                    </div>
                                </div>

                                <!-- 医療機関情報 -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">医療機関名</label>
                                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="○○病院、○○クリニック">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">主治医名</label>
                                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="田中医師">
                                    </div>
                                </div>

                                <!-- 障害等級 -->
                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-2">障害等級</label>
                                    <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                        <option value="">選択してください</option>
                                        <option value="1級">1級</option>
                                        <option value="2級">2級</option>
                                        <option value="3級">3級</option>
                                        <option value="障害手当金">障害手当金</option>
                                        <option value="未定">未定</option>
                                    </select>
                                </div>

                                <!-- 症状詳細 -->
                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-2">症状詳細</label>
                                    <textarea rows="4" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200 resize-none" placeholder="具体的な症状を記載してください"></textarea>
                                </div>

                                <!-- 治療情報 -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">現在の治療内容</label>
                                        <textarea rows="3" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200 resize-none" placeholder="通院频度、治療内容など"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">投薬歴</label>
                                        <textarea rows="3" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200 resize-none" placeholder="服用中の薬剤名、用量など"></textarea>
                                    </div>
                                </div>

                                <!-- 日常生活・就労への影響 -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">日常生活への影響</label>
                                        <textarea rows="3" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200 resize-none" placeholder="食事、入浴、外出等への影響"></textarea>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">就労への影響</label>
                                        <textarea rows="3" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200 resize-none" placeholder="就労状況、業務への影響など"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 申請管理情報 -->
                        <div class="bg-white/70 backdrop-blur-sm rounded-xl border border-notion-gray-200/60 shadow-notion overflow-hidden">
                            <div class="bg-purple-50 px-6 py-4 border-b border-notion-gray-200/60">
                                <h2 class="text-xl font-semibold text-notion-gray-800 flex items-center">
                                    <div class="w-6 h-6 bg-purple-500 rounded-lg flex items-center justify-center mr-3">
                                        <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"/>
                                            <path d="M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"/>
                                        </svg>
                                    </div>
                                    申請管理情報
                                </h2>
                            </div>
                            
                            <div class="p-6 space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">
                                            年金種類 <span class="text-red-500">*</span>
                                        </label>
                                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                                            <option value="">選択してください</option>
                                            <option value="basic">基礎年金</option>
                                            <option value="employees">厚生年金</option>
                                            <option value="mutual">共済年金</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">担当者</label>
                                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="佐藤花子">
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-notion-gray-700 mb-2">売上見込み</label>
                                    <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="300000" min="0">
                                </div>
                            </div>
                        </div>

                        <!-- アクションボタン -->
                        <div class="flex justify-center space-x-4 pt-8">
                            <button type="button" class="px-8 py-3 text-notion-gray-600 border border-notion-gray-300 rounded-lg hover:bg-notion-gray-50 transition-all duration-200 flex items-center space-x-2" onclick="window.history.back()">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                                <span>キャンセル</span>
                            </button>
                            <button type="submit" class="px-8 py-3 bg-linear-blue-600 hover:bg-linear-blue-700 text-white rounded-lg transition-all duration-200 shadow-linear flex items-center space-x-2">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                </svg>
                                <span id="submitButtonText">申請を保存</span>
                            </button>
                        </div>
                    </form>
                </div>
            </main>
        </div>
    </div>

    <script>
        // 基本テスト
        console.log('JavaScript loaded successfully');
        
        // ページ初期化：編集モードか新規作成モードかを判定
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded fired');
            
            const urlParams = new URLSearchParams(window.location.search);
            const editId = urlParams.get('edit');
            const viewId = urlParams.get('view');
            const isEditMode = editId !== null;
            const isViewMode = viewId !== null;
            const currentId = editId || viewId;
            
            console.log('URL Parameters:', window.location.search);
            console.log('Edit ID:', editId);
            console.log('View ID:', viewId);
            console.log('Current ID:', currentId);
            console.log('Is Edit Mode:', isEditMode);
            console.log('Is View Mode:', isViewMode);
            
            if (isEditMode) {
                // 編集モードの場合
                console.log('Setting edit mode...');
                
                const titleElement = document.getElementById('pageTitle');
                const subtitleElement = document.getElementById('pageSubtitle');
                const buttonElement = document.getElementById('submitButtonText');
                
                if (titleElement) {
                    titleElement.textContent = '申請情報編集';
                }
                
                if (subtitleElement) {
                    subtitleElement.textContent = `申請ID: APP-2024-${String(editId).padStart(3, '0')} の情報を編集しています`;
                }
                
                if (buttonElement) {
                    buttonElement.textContent = '変更を保存';
                }
                
                // 少し遅延してからデータを読み込み
                setTimeout(() => {
                    loadExistingData(editId);
                }, 100);
            } else if (isViewMode) {
                // 表示モードの場合
                console.log('Setting view mode...');
                alert('View mode detected! ViewID: ' + viewId);
                
                const titleElement = document.getElementById('pageTitle');
                const subtitleElement = document.getElementById('pageSubtitle');
                const buttonElement = document.getElementById('submitButtonText');
                
                if (titleElement) {
                    titleElement.textContent = '申請情報詳細';
                    alert('Title changed to: ' + titleElement.textContent);
                }
                
                if (subtitleElement) {
                    subtitleElement.textContent = `申請ID: APP-2024-${String(viewId).padStart(3, '0')} の詳細情報`;
                }
                
                if (buttonElement) {
                    buttonElement.textContent = '編集モードに切り替え';
                }
                
                // データを読み込み
                setTimeout(() => {
                    loadExistingData(viewId);
                    // データ読み込み後にフォームを読み取り専用にする
                    setTimeout(() => {
                        makeFormReadOnly();
                    }, 500);
                }, 100);
            } else {
                console.log('New application mode');
            }
        });

        // フォームを読み取り専用にする関数
        function makeFormReadOnly() {
            const form = document.querySelector('form');
            if (form) {
                // すべての入力フィールドを無効化
                const inputs = form.querySelectorAll('input, select, textarea');
                inputs.forEach(input => {
                    input.disabled = true;
                    input.style.backgroundColor = '#f7f6f3';
                    input.style.cursor = 'not-allowed';
                });
                
                // ボタンのクリックイベントを変更
                const submitBtn = document.querySelector('button[type="submit"]');
                if (submitBtn) {
                    submitBtn.onclick = function(e) {
                        e.preventDefault();
                        const currentId = new URLSearchParams(window.location.search).get('view');
                        window.location.href = `project-unified.html?edit=${currentId}`;
                    };
                }
            }
        }

        // 既存データの読み込み
        async function loadExistingData(editId) {
            try {
                // APIから実際のデータを取得
                if (typeof loadApplication === 'function') {
                    await loadApplication(editId);
                    return;
                }
            } catch (error) {
                console.error('Failed to load data from API, falling back to sample data:', error);
            }
            
            // フォールバック用サンプルデータ
            const sampleData = {
                '1': {
                    name: '田中太郎',
                    furigana: 'タナカタロウ',
                    age: 42,
                    gender: 'male',
                    birthday: '1982-05-15',
                    pensionNumber: '1234-567890',
                    phone: '03-1234-5678',
                    email: 'tanaka@example.com',
                    address: '東京都新宿区西新宿1-1-1',
                    hasSpouse: 'true',
                    spouse: {
                        name: '田中花子',
                        furigana: 'タナカハナコ',
                        mynumber: '123456789012',
                        pensionNumber: '2345-678901',
                        birthday: '1985-03-20',
                        age: 39,
                        gender: 'female',
                        income1: 2800000,
                        income2: 2900000,
                        spouseAddition: 'yes',
                        transferAddition: 'no',
                        address: '東京都新宿区西新宿1-1-1',
                        phone: '03-1234-5679',
                        email: 'hanako@example.com'
                    },
                    disease: 'うつ病',
                    firstVisit: '2023-05-10',
                    disabilityDate: '2023-11-10',
                    hospital: '新宿病院',
                    doctor: '山田医師',
                    grade: '2級',
                    symptoms: '気分の落ち込み、集中力低下、睡眠障害が継続している',
                    treatment: '週1回の通院、抗うつ薬の服用、カウンセリング',
                    medication: 'セルトラリン50mg、ロラゼパム0.5mg',
                    hasChildren: 'true',
                    childrenData: [
                        {
                            name: '田中一郎',
                            furigana: 'タナカイチロウ',
                            birthday: '2010-04-01',
                            age: 14,
                            gender: 'male',
                            mynumber: '345678901234',
                            pensionNumber: '',
                            isStudent: 'yes',
                            schoolName: '新宿中学校',
                            schoolYear: '2年'
                        },
                        {
                            name: '田中次郎',
                            furigana: 'タナカジロウ',
                            birthday: '2012-07-15',
                            age: 12,
                            gender: 'male',
                            mynumber: '456789012345',
                            pensionNumber: '',
                            isStudent: 'yes',
                            schoolName: '新宿小学校',
                            schoolYear: '6年'
                        }
                    ]
                },
                '2': {
                    name: '山田花子',
                    furigana: 'ヤマダハナコ',
                    age: 35,
                    gender: 'female',
                    birthday: '1989-08-22',
                    pensionNumber: '3456-789012',
                    phone: '03-2345-6789',
                    email: 'yamada@example.com',
                    address: '東京都渋谷区神南1-2-3',
                    hasSpouse: 'false',
                    disease: '統合失調症',
                    firstVisit: '2022-03-15',
                    disabilityDate: '2022-09-15',
                    hospital: '渋谷メンタルクリニック',
                    doctor: '佐藤医師',
                    grade: '1級',
                    symptoms: '幻聴、妄想、思考の混乱が見られる',
                    treatment: '月2回の通院、抗精神病薬の服用、デイケア参加',
                    medication: 'リスペリドン2mg、ロラゼパム1mg',
                    hasChildren: 'false'
                },
                '3': {
                    name: '佐藤一郎',
                    furigana: 'サトウイチロウ',
                    age: 58,
                    gender: 'male',
                    birthday: '1966-12-03',
                    pensionNumber: '4567-890123',
                    phone: '03-3456-7890',
                    email: 'sato@example.com', 
                    address: '東京都世田谷区三軒茶屋2-3-4',
                    hasSpouse: 'true',
                    spouse: {
                        name: '佐藤美香',
                        furigana: 'サトウミカ',
                        mynumber: '567890123456',
                        pensionNumber: '5678-901234',
                        birthday: '1970-01-10',
                        age: 54,
                        gender: 'female',
                        income1: 3200000,
                        income2: 3300000,
                        spouseAddition: 'yes',
                        transferAddition: 'no',
                        address: '東京都世田谷区三軒茶屋2-3-4',
                        phone: '03-3456-7891',
                        email: 'mika@example.com'
                    },
                    disease: '腰椎椎間板ヘルニア',
                    firstVisit: '2021-08-10',
                    disabilityDate: '2022-02-10',
                    hospital: '世田谷整形外科',
                    doctor: '鈴木医師',
                    grade: '3級',
                    symptoms: '腰部の激痛、下肢のしびれ、歩行困難',
                    treatment: '理学療法、痛み止めの服用、週1回のリハビリ',
                    medication: 'ロキソニン60mg、リリカ75mg',
                    hasChildren: 'true',
                    childrenData: [
                        {
                            name: '佐藤健太',
                            furigana: 'サトウケンタ',
                            birthday: '2005-09-12',
                            age: 19,
                            gender: 'male',
                            mynumber: '678901234567',
                            pensionNumber: '',
                            isStudent: 'yes',
                            schoolName: '東京大学',
                            schoolYear: '1年'
                        },
                        {
                            name: '佐藤美穂',
                            furigana: 'サトウミホ',
                            birthday: '2007-11-25',
                            age: 17,
                            gender: 'female',
                            mynumber: '789012345678',
                            pensionNumber: '',
                            isStudent: 'yes',
                            schoolName: '都立高校',
                            schoolYear: '2年'
                        },
                        {
                            name: '佐藤大輔',
                            furigana: 'サトウダイスケ',
                            birthday: '2009-03-08',
                            age: 15,
                            gender: 'male',
                            mynumber: '890123456789',
                            pensionNumber: '',
                            isStudent: 'yes',
                            schoolName: '世田谷中学校',
                            schoolYear: '3年'
                        }
                    ]
                },
                '4': {
                    name: '鈴木次郎',
                    furigana: 'スズキジロウ',
                    age: 29,
                    gender: 'male',
                    birthday: '1995-06-18',
                    pensionNumber: '6789-012345',
                    phone: '03-4567-8901',
                    email: 'suzuki@example.com',
                    address: '東京都練馬区石神井町4-5-6',
                    hasSpouse: 'true',
                    spouse: {
                        name: '鈴木恵子',
                        furigana: 'スズキケイコ',
                        mynumber: '901234567890',
                        pensionNumber: '7890-123456',
                        birthday: '1997-02-14',
                        age: 27,
                        gender: 'female',
                        income1: 2500000,
                        income2: 2600000,
                        spouseAddition: 'yes',
                        transferAddition: 'no',
                        address: '東京都練馬区石神井町4-5-6',
                        phone: '03-4567-8902',
                        email: 'keiko@example.com'
                    },
                    disease: '双極性障害',
                    firstVisit: '2023-12-01',
                    disabilityDate: '2024-06-01',
                    hospital: '練馬心療内科',
                    doctor: '高橋医師',
                    grade: '2級',
                    symptoms: '躁状態とうつ状態の繰り返し、気分の激しい変動',
                    treatment: '月1回の通院、気分安定薬の服用、心理療法',
                    medication: 'リチウム300mg、ラモトリギン100mg',
                    hasChildren: 'false'
                },
                '5': {
                    name: '高橋三郎',
                    furigana: 'タカハシサブロウ',
                    age: 52,
                    gender: 'male',
                    birthday: '1972-04-05',
                    pensionNumber: '8901-234567',
                    phone: '03-5678-9012',
                    email: 'takahashi@example.com',
                    address: '東京都中野区中野5-6-7',
                    hasSpouse: 'false',
                    disease: '関節リウマチ',
                    firstVisit: '2022-11-20',
                    disabilityDate: '2023-05-20',
                    hospital: '中野リウマチクリニック',
                    doctor: '伊藤医師',
                    grade: '3級',
                    symptoms: '全身の関節痛、朝のこわばり、関節の腫れ',
                    treatment: '月2回の通院、抗リウマチ薬の服用、理学療法',
                    medication: 'メトトレキサート10mg、プレドニゾロン5mg',
                    hasChildren: 'true',
                    childrenData: [
                        {
                            name: '高橋優子',
                            furigana: 'タカハシユウコ',
                            birthday: '2000-12-10',
                            age: 24,
                            gender: 'female',
                            mynumber: '012345678901',
                            pensionNumber: '',
                            isStudent: 'no',
                            occupation: '会社員'
                        },
                        {
                            name: '高橋健一',
                            furigana: 'タカハシケンイチ',
                            birthday: '2003-08-15',
                            age: 21,
                            gender: 'male',
                            mynumber: '123456789012',
                            pensionNumber: '',
                            isStudent: 'yes',
                            schoolName: '専門学校',
                            schoolYear: '2年'
                        }
                    ]
                },
                '001': {
                    name: '田中太郎',
                    furigana: 'タナカタロウ',
                    age: 42,
                    gender: 'male',
                    birthday: '1982-05-15',
                    pensionNumber: '1234-567890',
                    phone: '03-1234-5678',
                    email: 'tanaka@example.com',
                    address: '東京都新宿区西新宿1-1-1',
                    hasSpouse: 'true',
                    spouse: {
                        name: '田中花子',
                        furigana: 'タナカハナコ',
                        mynumber: '123456789012',
                        pensionNumber: '2345-678901',
                        birthday: '1985-03-20',
                        age: 39,
                        gender: 'female',
                        income1: 2800000,
                        income2: 2900000,
                        spouseAddition: 'yes',
                        transferAddition: 'no',
                        address: '東京都新宿区西新宿1-1-1',
                        phone: '03-1234-5679',
                        email: 'hanako@example.com'
                    },
                    disease: 'うつ病',
                    firstVisit: '2023-05-10',
                    disabilityDate: '2023-11-10',
                    hospital: '新宿病院',
                    doctor: '山田医師',
                    grade: '2級',
                    symptoms: '気分の落ち込み、集中力低下、睡眠障害が継続している',
                    treatment: '週1回の通院、抗うつ薬の服用、カウンセリング',
                    medication: 'セルトラリン50mg、ロラゼパム0.5mg',
                    dailyLife: '家事や外出に支障があり、日常生活に介助が必要',
                    work: '現在休職中、復職の見込みは不明',
                    pensionType: 'employees',
                    manager: '佐藤花子',
                    revenue: 300000
                },
                '002': {
                    name: '山田花子',
                    furigana: 'ヤマダハナコ',
                    age: 35,
                    gender: 'female',
                    birthday: '1989-03-15',
                    pensionNumber: '3456-789012',
                    phone: '03-2345-6789',
                    email: 'yamada@example.com',
                    address: '東京都渋谷区渋谷2-2-2',
                    hasSpouse: 'false',
                    disease: '統合失調症',
                    firstVisit: '2022-03-15',
                    disabilityDate: '2022-09-15',
                    hospital: '渋谷メンタルクリニック',
                    doctor: '田中医師',
                    grade: '2級',
                    symptoms: '幻聴、妄想、思考のまとまりの欠如',
                    treatment: '月2回の通院、抗精神病薬の服用',
                    medication: 'リスペリドン4mg、ビペリデン2mg',
                    dailyLife: '一人での外出が困難、金銭管理に支援が必要',
                    work: '就労移行支援事業所に通所中',
                    pensionType: 'basic',
                    manager: '田中一郎',
                    revenue: 250000
                }
            };
            
            const data = sampleData[editId] || sampleData['1'];
            
            console.log('Loading data for editId:', editId);
            console.log('Sample data keys:', Object.keys(sampleData));
            console.log('Found data:', data);
            console.log('Data:', data);
            
            // フォームにデータを入力 - より確実な方法
            try {
                // 申請者基本情報 - より確実なセレクタを使用
                const inputs = document.querySelectorAll('input, select');
                console.log('Found inputs:', inputs.length);
                
                // 基本情報フィールドを位置で特定（より確実）
                if (inputs.length >= 9) {
                    if (inputs[0] && inputs[0].type === 'text') inputs[0].value = data.name || '';
                    if (inputs[1] && inputs[1].type === 'text') inputs[1].value = data.furigana || '';
                    if (inputs[2] && inputs[2].type === 'number') inputs[2].value = data.age || '';
                    if (inputs[3] && inputs[3].tagName === 'SELECT') inputs[3].value = data.gender || '';
                    if (inputs[4] && inputs[4].type === 'date') inputs[4].value = data.birthday || '';
                    if (inputs[5] && inputs[5].type === 'text') inputs[5].value = data.pensionNumber || '';
                    if (inputs[6] && inputs[6].type === 'tel') inputs[6].value = data.phone || '';
                    if (inputs[7] && inputs[7].type === 'email') inputs[7].value = data.email || '';
                    if (inputs[8] && inputs[8].type === 'text') inputs[8].value = data.address || '';
                }
                
                console.log('Basic info loaded successfully:', {
                    name: data.name,
                    furigana: data.furigana,
                    age: data.age
                });
            } catch (error) {
                console.error('Error loading basic info:', error);
            }
            
            // 配偶者情報
            try {
                if (data.hasSpouse === 'true') {
                    const spouseYesRadio = document.querySelector('input[name="hasSpouse"][value="true"]');
                    if (spouseYesRadio) {
                        spouseYesRadio.checked = true;
                        // 手動でchangeイベントを発火させて配偶者情報を表示
                        spouseYesRadio.dispatchEvent(new Event('change'));
                    }
                    
                    // 配偶者情報表示を確実にする
                    setTimeout(() => {
                        const spouseInfo = document.getElementById('spouseInfo');
                        if (spouseInfo) {
                            spouseInfo.classList.remove('hidden');
                        }
                        
                        if (data.spouse) {
                            // 配偶者の各フィールドに値を設定
                            const spouseInputs = document.getElementById('spouseInfo').querySelectorAll('input, select');
                            console.log('Found spouse inputs:', spouseInputs.length);
                            
                            if (spouseInputs.length >= 14) {
                                spouseInputs[0].value = data.spouse.name || ''; // 氏名
                                spouseInputs[1].value = data.spouse.furigana || ''; // フリガナ
                                spouseInputs[2].value = data.spouse.mynumber || ''; // マイナンバー
                                spouseInputs[3].value = data.spouse.pensionNumber || ''; // 基礎年金番号
                                spouseInputs[4].value = data.spouse.birthday || ''; // 生年月日
                                spouseInputs[5].value = data.spouse.age || ''; // 年齢
                                spouseInputs[6].value = data.spouse.gender || ''; // 性別
                                spouseInputs[7].value = data.spouse.income1 || ''; // 年収（前年度）
                                spouseInputs[8].value = data.spouse.income2 || ''; // 年収（前々年度）
                                spouseInputs[9].value = data.spouse.spouseAddition || ''; // 配偶者加算対象
                                spouseInputs[10].value = data.spouse.transferAddition || ''; // 振替加算対象
                                spouseInputs[11].value = data.spouse.address || ''; // 住所
                                spouseInputs[12].value = data.spouse.phone || ''; // 電話番号
                                spouseInputs[13].value = data.spouse.email || ''; // メールアドレス
                                console.log('Spouse info loaded successfully');
                            }
                        }
                    }, 200);
                } else {
                    const spouseNoRadio = document.querySelector('input[name="hasSpouse"][value="false"]');
                    if (spouseNoRadio) {
                        spouseNoRadio.checked = true;
                    }
                }
            } catch (error) {
                console.error('Error loading spouse info:', error);
            }
            
            // 傷病情報
            try {
                const diseaseInput = document.querySelector('input[placeholder="うつ病、統合失調症など"]');
                const firstVisitInput = document.querySelectorAll('input[type="date"]')[1];
                const disabilityDateInput = document.querySelectorAll('input[type="date"]')[2];
                const hospitalInput = document.querySelector('input[placeholder="○○病院、○○クリニック"]');
                const doctorInput = document.querySelector('input[placeholder="田中医師"]');
                const gradeSelect = document.querySelectorAll('select')[2];
                const symptomsTextarea = document.querySelector('textarea[placeholder="具体的な症状を記載してください"]');
                const treatmentTextarea = document.querySelector('textarea[placeholder="通院频度、治療内容など"]');
                const medicationTextarea = document.querySelector('textarea[placeholder="服用中の薬剤名、用量など"]');
                const dailyLifeTextarea = document.querySelector('textarea[placeholder="食事、入浴、外出等への影響"]');
                const workTextarea = document.querySelector('textarea[placeholder="就労状況、業務への影響など"]');
                
                if (diseaseInput) diseaseInput.value = data.disease || '';
                if (firstVisitInput) firstVisitInput.value = data.firstVisit || '';
                if (disabilityDateInput) disabilityDateInput.value = data.disabilityDate || '';
                if (hospitalInput) hospitalInput.value = data.hospital || '';
                if (doctorInput) doctorInput.value = data.doctor || '';
                if (gradeSelect) gradeSelect.value = data.grade || '';
                if (symptomsTextarea) symptomsTextarea.value = data.symptoms || '';
                if (treatmentTextarea) treatmentTextarea.value = data.treatment || '';
                if (medicationTextarea) medicationTextarea.value = data.medication || '';
                if (dailyLifeTextarea) dailyLifeTextarea.value = data.dailyLife || '';
                if (workTextarea) workTextarea.value = data.work || '';
                
                console.log('Disease info loaded successfully');
            } catch (error) {
                console.error('Error loading disease info:', error);
            }
            
            // 申請管理情報
            try {
                const pensionTypeSelect = document.querySelectorAll('select')[3];
                const managerInput = document.querySelector('input[placeholder="佐藤花子"]');
                const revenueInput = document.querySelector('input[placeholder="300000"]');
                
                if (pensionTypeSelect) pensionTypeSelect.value = data.pensionType || '';
                if (managerInput) managerInput.value = data.manager || '';
                if (revenueInput) revenueInput.value = data.revenue || '';
                
                console.log('Management info loaded successfully');
            } catch (error) {
                console.error('Error loading management info:', error);
            }
        }

        // 配偶者有無によるフィールド表示切替
        document.querySelectorAll('input[name="hasSpouse"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const spouseInfo = document.getElementById('spouseInfo');
                if (this.value === 'true') {
                    spouseInfo.classList.remove('hidden');
                } else {
                    spouseInfo.classList.add('hidden');
                }
            });
        });

        // 子ども情報追加機能
        let childCount = 0;
        function addChild() {
            childCount++;
            const childrenList = document.getElementById('childrenList');
            
            if (childCount === 1) {
                childrenList.innerHTML = '';
            }
            
            const childItem = document.createElement('div');
            childItem.className = 'border border-notion-gray-200 rounded-lg p-6 space-y-6 bg-notion-gray-50';
            childItem.innerHTML = `
                <div class="flex items-center justify-between">
                    <h4 class="font-semibold text-notion-gray-700 text-lg flex items-center">
                        <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2">
                            <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M10 2L3 7v11a2 2 0 002 2h4v-6h2v6h4a2 2 0 002-2V7l-7-5z"/>
                            </svg>
                        </div>
                        子ども \${childCount}
                    </h4>
                    <button type="button" class="text-red-500 hover:text-red-700 p-1.5 hover:bg-red-100 rounded-lg transition-all duration-200" onclick="removeChild(this)">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                </div>
                
                <!-- 基本情報 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">氏名 <span class="text-red-500">*</span></label>
                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="田中太郎">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">フリガナ <span class="text-red-500">*</span></label>
                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="タナカタロウ">
                    </div>
                </div>
                
                <!-- 個人識別情報 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">マイナンバー <span class="text-red-500">*</span></label>
                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="123456789012" pattern="[0-9]{12}" maxlength="12">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">基礎年金番号</label>
                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="1234-567890" title="20歳以降の場合に記入">
                    </div>
                </div>
                
                <!-- 基本属性 -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">続柄 <span class="text-red-500">*</span></label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択</option>
                            <option value="長男">長男</option>
                            <option value="長女">長女</option>
                            <option value="次男">次男</option>
                            <option value="次女">次女</option>
                            <option value="三男">三男</option>
                            <option value="三女">三女</option>
                            <option value="四男">四男</option>
                            <option value="四女">四女</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">性別</label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択</option>
                            <option value="male">男性</option>
                            <option value="female">女性</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">生年月日 <span class="text-red-500">*</span></label>
                        <input type="date" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">年齢</label>
                        <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="12" min="0" max="30">
                    </div>
                </div>
                
                <!-- 障害・疾病情報 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">障害の有無</label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択してください</option>
                            <option value="none">なし</option>
                            <option value="physical">身体障害</option>
                            <option value="mental">知的障害</option>
                            <option value="psychiatric">精神障害</option>
                            <option value="developmental">発達障害</option>
                            <option value="other">その他</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">障害等級</label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択してください</option>
                            <option value="1">1級</option>
                            <option value="2">2級</option>
                            <option value="3">3級</option>
                            <option value="4">4級</option>
                            <option value="5">5級</option>
                            <option value="6">6級</option>
                            <option value="none">該当なし</option>
                        </select>
                    </div>
                </div>
                
                <!-- 学業・就労情報 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">学業・就労状況</label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択してください</option>
                            <option value="student">学生</option>
                            <option value="working">就労中</option>
                            <option value="unemployed">無職</option>
                            <option value="disabled">就労困難</option>
                            <option value="other">その他</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">年収</label>
                        <input type="number" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="0" min="0">
                    </div>
                </div>
                
                <!-- 加算対象情報 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">子の加算対象</label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択してください</option>
                            <option value="yes">対象（18歳到達年度末まで、又は20歳未満で障害等級1・2級）</option>
                            <option value="no">対象外</option>
                            <option value="unknown">判定中</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">生計同一</label>
                        <select class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200">
                            <option value="">選択してください</option>
                            <option value="yes">同一生計</option>
                            <option value="no">別生計</option>
                        </select>
                    </div>
                </div>
                
                <!-- 住所情報 -->
                <div class="grid grid-cols-1 md:grid-cols-1 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">住所</label>
                        <input type="text" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200" placeholder="申請者と同じ場合は「同上」">
                    </div>
                </div>
                
                <!-- 備考欄 -->
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-notion-gray-700 mb-2">備考</label>
                        <textarea rows="2" class="w-full px-4 py-3 border border-notion-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-linear-blue-500 focus:border-transparent outline-none transition-all duration-200 resize-none" placeholder="特記事項があれば記載してください"></textarea>
                    </div>
                </div>
            `;
            
            childrenList.appendChild(childItem);
        }

        function removeChild(button) {
            button.closest('.border').remove();
            childCount--;
            
            if (childCount === 0) {
                document.getElementById('childrenList').innerHTML = '<div class="text-sm text-notion-gray-500">「子どもを追加」ボタンを押して子ども情報を入力してください</div>';
            }
        }
    </script>
</body>
</html>