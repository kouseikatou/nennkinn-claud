<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>申請データ一覧 - 障害年金管理システム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- API連携スクリプト -->
    <script src="js/application-api.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif']
                    },
                    colors: {
                        'notion-gray': {
                            50: '#fbfbfb',
                            100: '#f7f6f3',
                            200: '#ebeae6',
                            300: '#d1cfc8',
                            400: '#9b9a97',
                            500: '#787774',
                            600: '#5e5d5a',
                            700: '#37352f',
                            800: '#25241f',
                            900: '#1f1e1a'
                        },
                        'primary': {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-notion-gray-50 font-sans antialiased">
    <!-- ヘッダー -->
    <header class="bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-50">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <button onclick="window.history.back()" class="text-gray-500 hover:text-gray-700 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"/>
                    </svg>
                </button>
                <div>
                    <h1 class="text-xl font-semibold text-gray-900">申請データ一覧</h1>
                    <p class="text-sm text-gray-500">全ての申請データをエクセル風の表で表示</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-3">
                <button onclick="exportToExcel()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"/>
                    </svg>
                    Excel出力
                </button>
                <button onclick="refreshData()" class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"/>
                    </svg>
                    更新
                </button>
            </div>
        </div>
    </header>

    <main class="p-6">
        <!-- 検索・フィルター -->
        <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6">
            <div class="flex flex-wrap items-center gap-4">
                <div class="flex-1 min-w-64">
                    <input type="text" id="searchInput" placeholder="申請者名、申請番号で検索..." 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none"
                           oninput="filterData()">
                </div>
                <div>
                    <select id="statusFilter" onchange="filterData()" 
                            class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none">
                        <option value="">全てのステータス</option>
                        <option value="draft">下書き</option>
                        <option value="submitted">提出済み</option>
                        <option value="under_review">審査中</option>
                        <option value="approved">承認済み</option>
                        <option value="rejected">却下</option>
                    </select>
                </div>
                <div>
                    <select id="typeFilter" onchange="filterData()" 
                            class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none">
                        <option value="">全ての種類</option>
                        <option value="mental">精神</option>
                        <option value="physical">身体</option>
                        <option value="intellectual">知的</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- データ読み込み状態 -->
        <div id="loadingIndicator" class="text-center py-8">
            <div class="inline-flex items-center">
                <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600 mr-3"></div>
                <span class="text-gray-600">データを読み込み中...</span>
            </div>
        </div>

        <!-- エラー表示 -->
        <div id="errorMessage" class="hidden bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <svg class="w-5 h-5 text-red-500 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z"/>
                </svg>
                <span class="text-red-700" id="errorText">データの読み込みに失敗しました</span>
            </div>
        </div>

        <!-- データテーブル -->
        <div class="bg-white rounded-xl border border-gray-200 overflow-hidden">
            <div class="overflow-x-auto">
                <table class="w-full" id="dataTable">
                    <thead class="bg-gray-50 border-b border-gray-200">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="sortTable('id')">
                                ID
                                <svg class="w-3 h-3 inline ml-1 opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                </svg>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="sortTable('applicationNumber')">
                                申請番号
                                <svg class="w-3 h-3 inline ml-1 opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                </svg>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="sortTable('applicantName')">
                                申請者名
                                <svg class="w-3 h-3 inline ml-1 opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                </svg>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">フリガナ</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">生年月日</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">性別</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">年金番号</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">電話番号</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">メール</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">住所</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="sortTable('disabilityType')">
                                障害種別
                                <svg class="w-3 h-3 inline ml-1 opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                </svg>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">障害内容</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">医療機関</th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="sortTable('status')">
                                ステータス
                                <svg class="w-3 h-3 inline ml-1 opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                </svg>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="sortTable('createdAt')">
                                作成日
                                <svg class="w-3 h-3 inline ml-1 opacity-50" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                </svg>
                            </th>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody" class="bg-white divide-y divide-gray-200">
                        <!-- データはJavaScriptで動的に挿入 -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 統計情報 -->
        <div class="mt-6 grid grid-cols-1 md:grid-cols-4 gap-4">
            <div class="bg-white rounded-lg border border-gray-200 p-4">
                <div class="flex items-center">
                    <div class="p-2 bg-blue-100 rounded-lg">
                        <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">総申請数</p>
                        <p class="text-2xl font-semibold text-gray-900" id="totalCount">-</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg border border-gray-200 p-4">
                <div class="flex items-center">
                    <div class="p-2 bg-green-100 rounded-lg">
                        <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">承認済み</p>
                        <p class="text-2xl font-semibold text-gray-900" id="approvedCount">-</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg border border-gray-200 p-4">
                <div class="flex items-center">
                    <div class="p-2 bg-yellow-100 rounded-lg">
                        <svg class="w-6 h-6 text-yellow-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">審査中</p>
                        <p class="text-2xl font-semibold text-gray-900" id="reviewCount">-</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg border border-gray-200 p-4">
                <div class="flex items-center">
                    <div class="p-2 bg-gray-100 rounded-lg">
                        <svg class="w-6 h-6 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"/>
                        </svg>
                    </div>
                    <div class="ml-4">
                        <p class="text-sm font-medium text-gray-500">下書き</p>
                        <p class="text-2xl font-semibold text-gray-900" id="draftCount">-</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        let allApplications = [];
        let filteredApplications = [];
        let sortColumn = 'createdAt';
        let sortDirection = 'desc';

        // ページ読み込み時の初期化
        document.addEventListener('DOMContentLoaded', async () => {
            // 開発環境で認証をスキップ
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                DevAuth.skipAuth();
            }
            
            await loadApplicationData();
        });

        // 申請データを読み込む
        async function loadApplicationData() {
            try {
                showLoading(true);
                hideError();
                
                const result = await ApplicationAPI.getApplications();
                
                if (result && result.applications) {
                    allApplications = result.applications;
                    filteredApplications = [...allApplications];
                    
                    renderTable();
                    updateStatistics();
                    
                    console.log('✅ 申請データを読み込みました:', allApplications.length, '件');
                } else {
                    throw new Error('申請データの取得に失敗しました');
                }
                
            } catch (error) {
                console.error('❌ データ読み込みエラー:', error);
                showError(error.message || 'データの読み込みに失敗しました');
                allApplications = [];
                filteredApplications = [];
                renderTable();
            } finally {
                showLoading(false);
            }
        }

        // テーブルをレンダリング
        function renderTable() {
            const tbody = document.getElementById('tableBody');
            
            if (filteredApplications.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="16" class="px-4 py-8 text-center text-gray-500">
                            データが見つかりませんでした
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = filteredApplications.map(app => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3 text-sm text-gray-900">${app.id || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-900">${app.applicationNumber || '-'}</td>
                    <td class="px-4 py-3 text-sm font-medium text-gray-900">${app.applicantName || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${app.applicantNameKana || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${formatDate(app.birthDate)}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${getGenderText(app.gender)}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${app.pensionNumber || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${app.phoneNumber || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${app.email || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600 max-w-xs truncate" title="${app.address || ''}">${app.address || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${getDisabilityTypeText(app.disabilityType)}</td>
                    <td class="px-4 py-3 text-sm text-gray-600 max-w-xs truncate" title="${app.disabilityDescription || ''}">${app.disabilityDescription || '-'}</td>
                    <td class="px-4 py-3 text-sm text-gray-600">${app.hospitalName || '-'}</td>
                    <td class="px-4 py-3">
                        ${getStatusBadge(app.status)}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-600">${formatDateTime(app.createdAt)}</td>
                    <td class="px-4 py-3 text-sm">
                        <div class="flex space-x-2">
                            <button onclick="viewApplication(${app.id})" class="text-blue-600 hover:text-blue-800 text-xs bg-blue-50 px-2 py-1 rounded">
                                詳細
                            </button>
                            <button onclick="editApplication(${app.id})" class="text-green-600 hover:text-green-800 text-xs bg-green-50 px-2 py-1 rounded">
                                編集
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // データフィルタリング
        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            
            filteredApplications = allApplications.filter(app => {
                const matchesSearch = !searchTerm || 
                    (app.applicantName && app.applicantName.toLowerCase().includes(searchTerm)) ||
                    (app.applicationNumber && app.applicationNumber.toLowerCase().includes(searchTerm));
                
                const matchesStatus = !statusFilter || app.status === statusFilter;
                const matchesType = !typeFilter || app.disabilityType === typeFilter;
                
                return matchesSearch && matchesStatus && matchesType;
            });
            
            renderTable();
            updateStatistics();
        }

        // テーブルソート
        function sortTable(column) {
            if (sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                sortDirection = 'asc';
            }
            
            filteredApplications.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];
                
                // 日付の場合
                if (column === 'createdAt' || column === 'birthDate') {
                    aVal = new Date(aVal);
                    bVal = new Date(bVal);
                }
                
                // 数値の場合
                if (column === 'id') {
                    aVal = parseInt(aVal) || 0;
                    bVal = parseInt(bVal) || 0;
                }
                
                // 文字列の場合
                if (typeof aVal === 'string') {
                    aVal = aVal.toLowerCase();
                    bVal = bVal?.toLowerCase() || '';
                }
                
                if (aVal < bVal) return sortDirection === 'asc' ? -1 : 1;
                if (aVal > bVal) return sortDirection === 'asc' ? 1 : -1;
                return 0;
            });
            
            renderTable();
        }

        // 統計情報を更新
        function updateStatistics() {
            document.getElementById('totalCount').textContent = filteredApplications.length;
            document.getElementById('approvedCount').textContent = filteredApplications.filter(app => app.status === 'approved').length;
            document.getElementById('reviewCount').textContent = filteredApplications.filter(app => app.status === 'under_review').length;
            document.getElementById('draftCount').textContent = filteredApplications.filter(app => app.status === 'draft').length;
        }

        // データ更新
        async function refreshData() {
            await loadApplicationData();
            showNotification('データを更新しました', 'success');
        }

        // Excel出力
        function exportToExcel() {
            try {
                const headers = [
                    'ID', '申請番号', '申請者名', 'フリガナ', '生年月日', '性別', '年金番号',
                    '電話番号', 'メール', '住所', '障害種別', '障害内容', '医療機関', 'ステータス', '作成日'
                ];
                
                const csvContent = [
                    headers.join(','),
                    ...filteredApplications.map(app => [
                        app.id || '',
                        app.applicationNumber || '',
                        app.applicantName || '',
                        app.applicantNameKana || '',
                        formatDate(app.birthDate) || '',
                        getGenderText(app.gender) || '',
                        app.pensionNumber || '',
                        app.phoneNumber || '',
                        app.email || '',
                        `"${(app.address || '').replace(/"/g, '""')}"`,
                        getDisabilityTypeText(app.disabilityType) || '',
                        `"${(app.disabilityDescription || '').replace(/"/g, '""')}"`,
                        app.hospitalName || '',
                        getStatusText(app.status) || '',
                        formatDateTime(app.createdAt) || ''
                    ].join(','))
                ].join('\n');
                
                const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `申請データ一覧_${new Date().toISOString().split('T')[0]}.csv`);
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification('Excelファイルをダウンロードしました', 'success');
            } catch (error) {
                console.error('Excel出力エラー:', error);
                showNotification('Excel出力に失敗しました', 'error');
            }
        }

        // 申請を表示
        function viewApplication(id) {
            window.open(`project-unified.html?edit=${id}`, '_blank');
        }

        // 申請を編集
        function editApplication(id) {
            window.location.href = `project-unified.html?edit=${id}`;
        }

        // ユーティリティ関数
        function formatDate(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleDateString('ja-JP');
        }

        function formatDateTime(dateString) {
            if (!dateString) return '-';
            const date = new Date(dateString);
            return date.toLocaleString('ja-JP');
        }

        function getGenderText(gender) {
            switch (gender) {
                case 'male': return '男性';
                case 'female': return '女性';
                case 'other': return 'その他';
                default: return '-';
            }
        }

        function getDisabilityTypeText(type) {
            switch (type) {
                case 'mental': return '精神';
                case 'physical': return '身体';
                case 'intellectual': return '知的';
                default: return '-';
            }
        }

        function getStatusText(status) {
            switch (status) {
                case 'draft': return '下書き';
                case 'submitted': return '提出済み';
                case 'under_review': return '審査中';
                case 'approved': return '承認済み';
                case 'rejected': return '却下';
                default: return '-';
            }
        }

        function getStatusBadge(status) {
            const statusText = getStatusText(status);
            const colorClass = {
                'draft': 'bg-gray-100 text-gray-800',
                'submitted': 'bg-blue-100 text-blue-800',
                'under_review': 'bg-yellow-100 text-yellow-800',
                'approved': 'bg-green-100 text-green-800',
                'rejected': 'bg-red-100 text-red-800'
            }[status] || 'bg-gray-100 text-gray-800';
            
            return `<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${colorClass}">${statusText}</span>`;
        }

        function showLoading(show) {
            document.getElementById('loadingIndicator').style.display = show ? 'block' : 'none';
        }

        function showError(message) {
            document.getElementById('errorText').textContent = message;
            document.getElementById('errorMessage').classList.remove('hidden');
        }

        function hideError() {
            document.getElementById('errorMessage').classList.add('hidden');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white transition-all duration-300 z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                'bg-blue-500'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>